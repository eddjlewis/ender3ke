
# --- Fan on PB14 that cools the bay ---
[temperature_fan electronics_cooling]
pin: PB14
sensor_type: Generic 3950 
sensor_pin: PA5    
control: watermark #pid
pid_Kp: 5.0         # start with rough values, then tune
pid_Ki: 0.2
pid_Kd: 0.0
target_temp: 40          # change as needed
min_speed: 0.2          # runs at 10% minimum
max_power: 0.8
kick_start_time: 0.5
off_below: 0.0           # don’t cut out near the floor
min_temp: 0
max_temp: 80
hardware_pwm: True

# Optional runtime macro to change threshold
[gcode_macro SET_EBAY_TARGET]
gcode:
  {% if 'T' in params %}
    SET_TEMPERATURE_FAN_TARGET temperature_fan=electronics_cooling target={params.T|float}
    RESPOND MSG="electronics_cooling target set to {params.T}°C"
  {% else %}
    RESPOND MSG="Usage: SET_EBAY_TARGET T=<degC>"
  {% endif %}
