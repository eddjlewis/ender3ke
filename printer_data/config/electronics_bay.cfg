# --- Electronics bay thermistor on TH1 ---
[temperature_sensor electronics_bay]
sensor_type: Generic 3950            # set your exact type if known (e.g. EPCOS 100K B57560G104F)
sensor_pin: TH1                      # or the MCU analog pin for TH1 (e.g. PC1)
pullup_resistor: 4700                # BTT boards use 4.7k

# --- Fan on PB14 that cools the bay ---
[temperature_fan electronics_cooling]
pin: PB14
sensor: electronics_bay
target_temp: 40                      # default cutoff (°C). Change at runtime via macro below
min_temp: 0
max_temp: 80
control: watermark                   # simple on/off with hysteresis
max_power: 1.0
kick_start_time: 0.5
hardware_pwm: True
off_below: 0.20

# Optional: tighter hysteresis (fan turns on 2°C above target, off 2°C below)
# hysteresis: 2.0

# --- Runtime control macro: set target without editing config ---
[gcode_macro SET_EBAY_TARGET]
description: Set electronics bay target temperature (°C)
gcode:
  {% if 'T' in params %}
    SET_TEMPERATURE_FAN_TARGET temperature_fan=electronics_cooling target={params.T|float}
    RESPOND PREFIX=cfg MSG="electronics_cooling target set to {params.T}°C"
  {% else %}
    RESPOND PREFIX=cfg MSG="Usage: SET_EBAY_TARGET T=<degC>  (e.g. T=45)"
  {% endif %}
